<% layout('layouts/boilerplateHome') -%>

<style>
    .Nprice {
        display: none;
    }
</style>

<div class="row">
        <% for(let listing of allListings) { %>
            <div class="col-xl-4 col-md-6 col-sm-6">
                <a href="/listings/<%= listing._id %>" class="card-link">
                    <div class="card">
                        <img src="<%= listing.image.url %>" class="card-img-top" alt="Listing Image">
                        <div class="card-body">
                            <p class="card-text">
                                <span class="card-title"><%= listing.title %></span>
                                    <br>
                                <span class="Oprice">&#8377; <%= listing.price ? listing.price : 500 %> / night</span> 
                                <span class="Nprice">&#8377; <%= listing.price ? listing.price*1.18 : 500*1.18 %> / night</span>   
                            </p>
                        </div>
                    </div>
                </a>
            </div>
        <% } %>
</div>
    
<script>
    let el = document.getElementById("flexSwitchCheckDefault");
    let el1 = document.getElementsByClassName("Oprice");
    let el2 = document.getElementsByClassName("Nprice");
    
    el.addEventListener("change", function() {
        if(this.checked) {
            for (let item of el1) {
                item.style.display = "none";
            }
            for (let item of el2) {
                item.style.display = "inline";
            }
        } else {
            for (let item of el1) {
                item.style.display = "inline";
            }
            for (let item of el2) {
                item.style.display = "none";
            }
        }
    });
</script>

<script>
    async function activeTab (tab) {
        let navlinks = await document.querySelectorAll('.nav-link');
        for(let link of navlinks) {
            link.classList.remove('active');
        }
        this.classList.add('active');
    }
</script>